<div class="row my-5">
  <div class="col-4">
    <div class="card">
      <img src="assets/images/angular_spring_boot.png" height="250">
      <div class="card-body">
        <h5 class="card-title">DevSecOps</h5>
        <p class="card-text">
          Aplicar la seguridad en el desarrollo de aplicativos minimiza vulnerabilidades en superficie de ataque
        </p>
        <a href="#" class="btn btn-primary">Ponsiano De Loor</a>

        <a href="#" class="btn btn-primary mx-2">Ms Compute Security, Dev</a>
      </div>
    </div>

  </div>
  <div class="col-8">
    <div class="accordion" id="accordionExample">
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingOne">
          <button class="accordion-button" type="button" data-bs-toggle="collapse"
                  data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
            Registro de Personas
          </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
          <div class="accordion-body">
              Formulario para crear personas

            <form [formGroup]="personForm" (ngSubmit)="savePerson()">
              <div class="mb-3">
                <label for="identification" class="form-label">Identificación</label>
                <input type="text" class="form-control" id="identification" formControlName="identification">
              </div>
              <div class="mb-3">
                <label for="name" class="form-label">Nombre</label>
                <input type="text" class="form-control" id="name" formControlName="name">
              </div>
              <div class="mb-3">
                <label for="age" class="form-label">Edad</label>
                <input type="number" class="form-control" id="age" formControlName="age">
              </div>
              <div class="mb-3">
                <label for="address" class="form-label">Dirección</label>
                <input type="text" class="form-control" id="address" formControlName="address">
              </div>
              <div class="mb-3">
                <label for="phone" class="form-label">Teléfono</label>
                <input type="text" class="form-control" id="phone" formControlName="phone">
              </div>
              <button type="submit" class="btn btn-primary">Crear</button>
            </form>

            <ul class="list-group mt-2">
              <li *ngFor="let person of persons" class="list-group-item">
                {{person.identification}} - {{person.name}}, <strong>Edad</strong> {{person.age}},
                Dirección {{person.address}}, Teléfono {{person.phone}}
              </li>
            </ul>

          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingTwo">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                  data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
            Creacion de Clientes
          </button>
        </h2>
        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            Formulario para crear clientes
            <form [formGroup]="clientForm" (ngSubmit)="saveClient()">
              <div class="mb-3">
                <label for="person" class="form-label">Seleccione una persona</label>
                <select class="form-select" aria-label="Default select example" id="person" formControlName="person" name="person">
                  <option>Seleccione</option>
                  <option *ngFor="let person of persons" [value]="person.id">{{person.name}}</option>
                </select>
              </div>
              <div class="mb-3">
                <div class="mb-3">
                  <label for="password" class="form-label">Contraseña</label>
                  <input type="password" class="form-control" id="password" formControlName="password">
                </div>

              </div>
              <button type="submit" class="btn btn-primary">Crear</button>
              <ul class="list-group mt-2">
                <li *ngFor="let client of clients" class="list-group-item">
                  {{client.person.identification}} - {{client.person.name}}, <strong>Edad</strong> {{client.person.age}},
                </li>
              </ul>
            </form>
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingThree">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                  data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
            Creacion de tipo de Cuentas Bancarias
          </button>
        </h2>
        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            Formulario para crear tipo de cuentas bancarias (Ejm: Ahorros, Corriente, etc)
            <!--make a form for save a account Types -->
            <form [formGroup]="accountTypesForm" (ngSubmit)="saveAccountType()">
              <div class="mb-3">
                <label for="name" class="form-label">Tipo de cuenta</label>
                <input type="text" class="form-control" id="name" formControlName="name">
              </div>
              <button type="submit" class="btn btn-primary">Crear</button>
            </form>

            <ul class="list-group mt-2">
              <li *ngFor="let accountType of accountTypes" class="list-group-item">
                {{accountType.name}}
              </li>
            </ul>

          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingFour">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                  data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
            Creacion de cuentas
          </button>
        </h2>
        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            Formulario para la creacion de cuentas

            <form [formGroup]="accountForm" (ngSubmit)="saveAccount()">
              <div class="mb-3">
                <label for="client" class="form-label">Seleccione una Cliente</label>
                <select class="form-select" aria-label="Default select example" id="client" formControlName="client" name="client">
                  <option>Seleccione</option>
                  <option *ngFor="let client of clients" [value]="client.id">{{client.person.name}}</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="accountType" class="form-label">Seleccione una tipo de cuenta</label>
                <select class="form-select" aria-label="Default select example" id="accountType" formControlName="accountType" name="client">
                  <option>Seleccione un tipo de cuenta</option>
                  <option *ngFor="let accountType of accountTypes" [value]="accountType.id">{{accountType.name}}</option>
                </select>
              </div>
              <div class="mb-3">
                <div class="mb-3">
                  <label for="balance" class="form-label">Numero de cuenta: Este numero debe ser asignado en base a la normativa</label>
                  <input type="text" class="form-control" id="numberAccount" formControlName="numberAccount">
                </div>
              </div>

              <div class="mb-3">
                <div class="mb-3">
                  <label for="balance" class="form-label">Deposito Inicial</label>
                  <input type="text" class="form-control" id="balance" formControlName="balance">
                </div>

              </div>
              <button type="submit" class="btn btn-primary">Crear</button>
            </form>

            <p>Listado de cuentas</p>
            <ul class="list-group mt-2">
              <li *ngFor="let account of accounts" class="list-group-item">
                {{account.accountType.name}} - {{account.numberAccount}} - {{account.balance}} - {{account.client.person.name}}
              </li>
            </ul>


          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingFive">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                  data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFour">
            Creacion de transacciones
          </button>
        </h2>
        <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            Formulario para la crecion de transacciones

            <form [formGroup]="transactionForm" (ngSubmit)="saveTransaction()">
              <div class="mb-3">
                <label for="client" class="form-label">Seleccione una cuenta</label>
                <select class="form-select" aria-label="Default select example" id="account" formControlName="account" name="account">
                  <option>Seleccione</option>
                  <option *ngFor="let account of accounts" value="{{account.id}}">
                    {{account.accountType.name}} - {{account.numberAccount}} - {{account.balance}} - {{account.client.person.name}}
                  </option>
                </select>
              </div>
              <div class="mb-3">
                <label for="accountType" class="form-label">Seleccione una tipo de transaccion</label>
                <select class="form-select" aria-label="Default select example" id="transactionType" formControlName="transactionType" name="transactionType">
                  <option>Seleccione un tipo de transaccion</option>
                  <option value="1">Deposito</option>
                  <option value="2">Retiro</option>
                </select>
              </div>
              <div class="mb-3">
                <div class="mb-3">
                  <label for="balance" class="form-label">Valor $</label>
                  <input type="text" class="form-control" id="amount" formControlName="amount" name="amount">
                </div>
              </div>

              <button type="submit" class="btn btn-primary">Crear transaccion</button>

              <p>Listado de Transacciones</p>

              <table class="table">
                <tr>
                  <th>Nombre</th>
                  <th>Tipo de cuenta</th>
                  <th>Numero</th>
                  <th>Saldo Inicial</th>
                  <th>Valor</th>
                  <th>Saldo Final</th>
                  <th>Movimiento</th>
                </tr>
                <tr *ngFor="let transaction of transactions">
                  <td>{{transaction.account.client.person.name}}</td>
                  <td>{{transaction.account.accountType.name}}</td>
                  <td>{{transaction.account.numberAccount}}</td>
                  <td>{{transaction.balance}}</td>
                  <td>{{transaction.amount}} <span *ngIf="transaction.transactionType == 2">( - )</span></td>
                  <td>{{transaction.newBalance}}</td>
                  <td>{{transaction.description}}</td>
                </tr>
              </table>

            </form>

          </div>
        </div>
      </div>

    </div>

  </div>
</div>
